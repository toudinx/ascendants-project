<aside class="info-panel">
  @if (activeTab === 'details') {
    <div>
      <h2>{{ kaelis?.name || 'Kaelis' }}</h2>
      <div class="sub-title">{{ kaelis?.title }}</div>
    </div>

    <div class="xp-block">
      <div class="xp-meta">
        <span>LVL {{ xpLevel }}</span>
        <span>{{ xpCurrent }} / {{ xpMax }}</span>
      </div>
      <progress class="xp-track" [value]="xpCurrent" [max]="xpMax"></progress>
    </div>

    <div class="affinity-badge">Affinity Lv. {{ affinity }}</div>

    <h3>Attributes</h3>
    <div class="stat-list">
      @for (stat of baseStats; track stat.label) {
        <div class="stat-row">
          <span class="stat-label">{{ stat.label }}</span>
          <span class="stat-value">{{ stat.value }}</span>
        </div>
      }
    </div>

    <h3>Loadout</h3>
    <div class="loadout-row">
      <div class="loadout-header">Weapon: {{ weapon?.name || 'None' }}</div>
      <div class="loadout-stats">
        @for (stat of weaponStats; track stat.label) {
          <span>{{ stat.value }}</span>
        }
      </div>
    </div>
    <div class="loadout-row">
      <div class="loadout-header">Sigils</div>
      <div class="loadout-stats accent">
        {{ primarySigilBonus?.detail || 'No active set bonus.' }}
      </div>
    </div>
  }

  @if (activeTab === 'weapon') {
    <div>
      <div class="sub-title">Equipped Weapon</div>
      <h2 class="tone-warn">{{ weapon?.name || 'None equipped' }}</h2>
      <div class="muted">{{ weapon?.description }}</div>
    </div>

    <h3>Stats</h3>
    <div class="stat-list">
      @for (stat of weaponStats; track stat.label) {
        <div class="stat-row">
          <span class="stat-label">{{ stat.label }}</span>
          <span class="stat-value">{{ stat.value }}</span>
        </div>
      }
    </div>

    <h3>Passive</h3>
    <div class="muted">{{ weapon?.passive || 'No passive recorded.' }}</div>

    <div class="panel-actions">
      <app-button label="Change Weapon" variant="primary" (click)="changeWeapon.emit()"></app-button>
    </div>
  }

  @if (activeTab === 'sigils') {
    <div>
      <div class="sub-title">Sigil Matrix</div>
      <h2>Loadout Summary</h2>
    </div>

    <h3>Sigil Stats Gained</h3>
    @if (sigilStats.length) {
      <div class="stat-list">
        @for (stat of sigilStats; track $index) {
          <div class="stat-row">
            <span class="stat-label">{{ stat.label }}</span>
            <span class="stat-value">{{ stat.value }}</span>
          </div>
        }
      </div>
    } @else {
      <div class="muted">Equip sigils to see stats.</div>
    }

    <h3>Set Bonuses</h3>
    @if (sigilSetBonuses.length) {
      <div class="bonus-list">
        @for (bonus of sigilSetBonuses; track bonus.id) {
          <div class="bonus-row">
            <span class="stat-label">{{ bonus.label }}</span>
            <span class="stat-sub">{{ bonus.detail }}</span>
          </div>
        }
      </div>
    } @else {
      <div class="muted">No active bonuses.</div>
    }
  }

  @if (activeTab === 'skins') {
    <div class="muted">Select a skin from the stage view.</div>
  }
</aside>
